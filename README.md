# win2ndarray

WINフォーマット地震波形データ変換スクリプト
このスクリプト win2ndarray.py は、WINフォーマットの地震波形ファイル（.win）を読み取り、NumPy配列形式の波形データおよびメタデータに変換するためのツールです。対応するチャネル情報ファイル（.ch）も読み込むことで、物理単位への変換も行います。

主な機能
WINフォーマットファイルのパースとデコード

チャネル情報ファイル（.ch）の読み込みと統合

差分圧縮されたデータの復号（sample size code 0〜4に対応）

センサ感度やゲインに基づく物理単位（物理波形）への変換

時刻情報の付与およびステップ時間の計算

ステーション・成分ごとの波形データを辞書形式で格納

出力
waveform_info_df：各観測点と成分ごとの波形長や位置情報などを含む pandas.DataFrame

waveform_dict：ステーションごとに分けられた波形・時間情報（辞書型）

使用方法（例）
python win2ndarray.py
ファイル名はスクリプト内でハードコードされているため、以下のように対象の .win ファイルおよび .ch ファイルを用意してください：

waveform_info_df, waveform_dict = extract_waveform_metadata("180805.090417", "180805.090417.ch")


注意点
.win ファイルと .ch ファイルの命名規則および形式が一致している必要があります。
デコード処理は差分圧縮の各形式に対応しており、Numbaによる高速化を実装しています。
非常に大きなファイルを処理する際は、メモリ使用量に注意してください。
